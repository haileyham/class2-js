<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/2-7.css" rel="stylesheet">
  <title>2-7</title>
</head>
<body>




  <div class="black-bg" id="modal-box">
    <div class="white-bg">
      <h4>로그인하세요</h4>
      <form action="1-7-1.html" id="form">
        <div class="my-3">
          <input type="text" class="form-control" id="email">
        </div>
        <div class="my-3">
          <input type="password" class="form-control" id="password">
        </div>
        <button type="submit" class="btn btn-primary" id="send">전송</button>
        <button type="button" class="btn btn-danger" id="close">닫기</button>
      </form>
    </div>
  </div> 


  <button class="modal-btn" id="open">모달창!</button>






  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js" integrity="sha512-894YE6QWD5I59HgZOGReFYm4dnWc1Qt5NtvYSaNcOP+u1T9qYdvdihz0PPSiiqn/+/3e7Jo4EaG7TubfWGUrMQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script> 
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
  <script>

    $('#open').on('click',function(){
      $('.black-bg').addClass('show');
    })

    $('#close').on('click',function(){
      $('#modal-box').removeClass('show');
    })


    $('form').on('submit', function (e) {
    var 입력한값 = document.getElementById('email').value;
    var 비번검사 = document.getElementById('password').value;
      if(입력한값 == ''){
        e.preventDefault();
        alert('아이디입력해주세요')
      }
      if(document.getElementById('password').value.length < 6){
        e.preventDefault();
        alert('비밀번호 6자 이상 입력해주세요')
      } if(/\S+@\S+\.\S+/.test(입력한값) == false){
        e.preventDefault();
        alert('이메일 형식아님')
      } if(/[A-Z]/.test(비번검사) == false){
        e.preventDefault();
        alert('비번에 대문자 하나이상포함')
      }
    });
  </script>


<script>
  // 검정배경 눌렀을 때, 모달창 닫기 (이전에 class 탈부착으로 만들었으면 통일되게 만들어야 작동)

  // $('.black-bg').on('click',function(){
  //   $('#modal-box').removeClass('show');
  // })

  // 위에대로 코드 짜면 검정배경말고 다른곳 눌러도 닫힘
  // 이벤트 버블링 때문(종이 겹쳤을때, 누를경우 뒤에도 압력가듯이..)


  // 유용한 이벤트관련 함수들
  // 이벤트 리스너 안에 on('click',function(e){})
  // e.target; 이벤트발생한곳, 유저가 실제로 누른거 (흰배경누르면 > 흰배경출력)
  // e.currentTarget; 이벤트리스터 달린 곳
  // 혹은 this;
  // e.preventDefault(); 이벤트 기본동작 막아줌(클릭안한것처럼,ex폼전송막기)
  // e.stopPropagation(); 내 상위요소로 이벤트 버블링 막아줌



  // 내가 실제로 클릭한 까만배경이면 모달창 닫도록
  $('.black-bg').on('click',function(e){
    if(e.target == document.querySelector('.black-bg')){
      $('#modal-box').removeClass('show');
    }
  });
  
  // document.querySelector('.black-bg')와 $() jQuery결과는 다르게생김
  // jQuery썼을때 같게 비교하려면 $(e.target)이렇게 써야함


  // == 등호 비교하기전에 잘 모르겠으면 console.log로 출력해보기
  // console.log(e.target);
  // console.log(document.querySelector('.black-bg'));
  // 근데 위에 콘솔창 왜 동작안하징..?



  // 1. 이벤트버블링은 항상 일어남
  // 2. 이벤트관련 기능들 사용가능
</script>

</body>
</html>